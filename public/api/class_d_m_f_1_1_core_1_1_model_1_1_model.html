<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>DM Framework: Класс Model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DM Framework
   &#160;<span id="projectnumber">v0.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Титульная&#160;страница</span></a></li>
      <li><a href="namespaces.html"><span>Пространства&#160;имен</span></a></li>
      <li class="current"><a href="annotated.html"><span>Структуры&#160;данных</span></a></li>
      <li><a href="files.html"><span>Файлы</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Поиск" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Структуры&#160;данных</span></a></li>
      <li><a href="classes.html"><span>Алфавитный&#160;указатель&#160;структур&#160;данных</span></a></li>
      <li><a href="hierarchy.html"><span>Иерархия&#160;классов</span></a></li>
      <li><a href="functions.html"><span>Поля&#160;структур</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_d_m_f_1_1_core_1_1_model_1_1_model.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>Указатель</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Структуры данных</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Пространства имен</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Файлы</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Функции</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Переменные</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pub-attribs">Поля данных</a> &#124;
<a href="#pro-methods">Защищенные члены</a>  </div>
  <div class="headertitle">
<div class="title">Класс Model</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Граф наследования:Model:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_d_m_f_1_1_core_1_1_model_1_1_model.png" usemap="#Model_map" alt=""/>
  <map id="Model_map" name="Model_map">
<area href="class_d_m_f_1_1_core_1_1_component_1_1_component.html" alt="Component" shape="rect" coords="0,0,75,24"/>
<area href="class_d_m_f_1_1_auth_1_1_model_1_1_base_user.html" alt="BaseUser" shape="rect" coords="0,112,75,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:a5022fc366773937f776f7f58d9d7b8eb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a5022fc366773937f776f7f58d9d7b8eb">_scheme</a> ()</td></tr>
<tr class="separator:a5022fc366773937f776f7f58d9d7b8eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3568bcae68c990259045cb424aaaa858"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a> ()</td></tr>
<tr class="separator:a3568bcae68c990259045cb424aaaa858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0477cca06448ebd1b27f2800f348d5b6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a0477cca06448ebd1b27f2800f348d5b6">_update_table</a> ()</td></tr>
<tr class="separator:a0477cca06448ebd1b27f2800f348d5b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44dfeeca21a0b8d28e12ee2101cd2901"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a44dfeeca21a0b8d28e12ee2101cd2901">_create_table</a> ()</td></tr>
<tr class="separator:a44dfeeca21a0b8d28e12ee2101cd2901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5549ced891f16d60fb04ae7cb09b5525"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a5549ced891f16d60fb04ae7cb09b5525">_load_fixtures</a> ()</td></tr>
<tr class="separator:a5549ced891f16d60fb04ae7cb09b5525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d49220192e0e6935e54dc6da94ab6af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a7d49220192e0e6935e54dc6da94ab6af">_dump_fixtures</a> ()</td></tr>
<tr class="separator:a7d49220192e0e6935e54dc6da94ab6af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a626c1f0706d551280128b1ac1c573a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a1a626c1f0706d551280128b1ac1c573a">_drop_table</a> ()</td></tr>
<tr class="separator:a1a626c1f0706d551280128b1ac1c573a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f016cbc7f01f9a328c6ee504b55dec9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a2f016cbc7f01f9a328c6ee504b55dec9">_generate_sql_for_table</a> ()</td></tr>
<tr class="separator:a2f016cbc7f01f9a328c6ee504b55dec9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a842616d757b4e68424cc3ad96f0a7c83"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a842616d757b4e68424cc3ad96f0a7c83">get_by_pk</a> ($pk, $fields=[])</td></tr>
<tr class="separator:a842616d757b4e68424cc3ad96f0a7c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68fec40012b18bc6aedb203350fd6a1e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a68fec40012b18bc6aedb203350fd6a1e">get_by_condition</a> ($condition=[], $order_by=[], $limit=null, $fields=[])</td></tr>
<tr class="separator:a68fec40012b18bc6aedb203350fd6a1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73df0100ad236c68cceeb77f0050ad8c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a73df0100ad236c68cceeb77f0050ad8c">update_by_pk</a> ($data, $pk)</td></tr>
<tr class="separator:a73df0100ad236c68cceeb77f0050ad8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a219c164f3c03521fa184c876b3223b34"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a219c164f3c03521fa184c876b3223b34">update_by_condition</a> ($data, $condition)</td></tr>
<tr class="separator:a219c164f3c03521fa184c876b3223b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c8b15d2856f2c4097a9db32f90b706"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a67c8b15d2856f2c4097a9db32f90b706">create</a> ($data)</td></tr>
<tr class="separator:a67c8b15d2856f2c4097a9db32f90b706"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component')"><img src="closed.png" alt="-"/>&#160;Открытые члены inherited from <a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html">Component</a></td></tr>
<tr class="memitem:a095c5d389db211932136b53f25f39685 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a095c5d389db211932136b53f25f39685">__construct</a> ()</td></tr>
<tr class="separator:a095c5d389db211932136b53f25f39685 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8e85eba626e0e5aa5667b2fe29d61fc inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#ab8e85eba626e0e5aa5667b2fe29d61fc">config</a> ($name, $default=false)</td></tr>
<tr class="separator:ab8e85eba626e0e5aa5667b2fe29d61fc inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9558c95d4892fd8b2cfa71e649d8092a inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a9558c95d4892fd8b2cfa71e649d8092a">model</a> ($name)</td></tr>
<tr class="separator:a9558c95d4892fd8b2cfa71e649d8092a inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a105c5e3c45234f1538701eda06bf26ac inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a105c5e3c45234f1538701eda06bf26ac">form</a> ($name)</td></tr>
<tr class="separator:a105c5e3c45234f1538701eda06bf26ac inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a912187b9bad05f8454864cc5eef14395 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a912187b9bad05f8454864cc5eef14395">session</a> ()</td></tr>
<tr class="separator:a912187b9bad05f8454864cc5eef14395 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ddb717c4a283b82d354b02a6a71a59 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a53ddb717c4a283b82d354b02a6a71a59">request</a> ()</td></tr>
<tr class="separator:a53ddb717c4a283b82d354b02a6a71a59 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2dc5c4c1bec4baf4429bde419145b5f inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#af2dc5c4c1bec4baf4429bde419145b5f">render</a> ($template_name, $data=[], $http_response_code=200)</td></tr>
<tr class="separator:af2dc5c4c1bec4baf4429bde419145b5f inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ac422b8212f4051f079404300ff92a8 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a1ac422b8212f4051f079404300ff92a8">string</a> ($message, $http_status_code=200, $headers=[])</td></tr>
<tr class="separator:a1ac422b8212f4051f079404300ff92a8 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a79951f166c7b950dc2c4b506a67b8d inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a4a79951f166c7b950dc2c4b506a67b8d">json</a> ($data)</td></tr>
<tr class="separator:a4a79951f166c7b950dc2c4b506a67b8d inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e82ea4a403cea76f314915aba28550 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a47e82ea4a403cea76f314915aba28550">dump</a> ($data)</td></tr>
<tr class="separator:a47e82ea4a403cea76f314915aba28550 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06059999b3114dd66cde250b20f014c4 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a06059999b3114dd66cde250b20f014c4">redirect</a> ($path)</td></tr>
<tr class="separator:a06059999b3114dd66cde250b20f014c4 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af256aa090bb9b0124647f899335b22b2 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#af256aa090bb9b0124647f899335b22b2">clean</a> ($value)</td></tr>
<tr class="separator:af256aa090bb9b0124647f899335b22b2 inherit pub_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Поля данных</h2></td></tr>
<tr class="memitem:a63f4748915d2fdad2f2503705a7dbb59"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a63f4748915d2fdad2f2503705a7dbb59">$table_name</a> = null</td></tr>
<tr class="separator:a63f4748915d2fdad2f2503705a7dbb59"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Защищенные члены</h2></td></tr>
<tr class="memitem:a7fa118d3a69facb2d428c15c3d7e5533"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a7fa118d3a69facb2d428c15c3d7e5533">_get_table_prefix</a> ()</td></tr>
<tr class="separator:a7fa118d3a69facb2d428c15c3d7e5533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80ad7c210b6e2edce53bd0398f102524"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a80ad7c210b6e2edce53bd0398f102524">_dump_data</a> ($limit=null)</td></tr>
<tr class="separator:a80ad7c210b6e2edce53bd0398f102524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8910e5554267df39245417efc26bbc60"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a8910e5554267df39245417efc26bbc60">_get_primary_key_field_name</a> ()</td></tr>
<tr class="separator:a8910e5554267df39245417efc26bbc60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa002973b91e5b6ceb97a78e4bc2bc80"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#aaa002973b91e5b6ceb97a78e4bc2bc80">_get_sql_from_condition</a> ($condition=[])</td></tr>
<tr class="separator:aaa002973b91e5b6ceb97a78e4bc2bc80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4786eee57e28e78f2e40cf4573c329c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#aa4786eee57e28e78f2e40cf4573c329c">_get_sql_from_order_by</a> ($order_by)</td></tr>
<tr class="separator:aa4786eee57e28e78f2e40cf4573c329c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b83532e52d75afcaf0ac217672c2611"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3b83532e52d75afcaf0ac217672c2611">_get_sql_from_limit</a> ($limit)</td></tr>
<tr class="separator:a3b83532e52d75afcaf0ac217672c2611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6cb221e1b1dc53917ff3ac2eb56f4d6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#ab6cb221e1b1dc53917ff3ac2eb56f4d6">_get_table_fields</a> ()</td></tr>
<tr class="separator:ab6cb221e1b1dc53917ff3ac2eb56f4d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component')"><img src="closed.png" alt="-"/>&#160;Защищенные члены inherited from <a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html">Component</a></td></tr>
<tr class="memitem:a61f3ecdec3694138ce19daca247d2bb6 inherit pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a61f3ecdec3694138ce19daca247d2bb6">get_component</a> ($name, $type)</td></tr>
<tr class="separator:a61f3ecdec3694138ce19daca247d2bb6 inherit pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a032e8d4bbac2fbd82ada482342e4910c inherit pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a032e8d4bbac2fbd82ada482342e4910c">get_module</a> ()</td></tr>
<tr class="separator:a032e8d4bbac2fbd82ada482342e4910c inherit pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27aa433d2444e978e5d193728937e635 inherit pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a27aa433d2444e978e5d193728937e635">get_module_name</a> ()</td></tr>
<tr class="separator:a27aa433d2444e978e5d193728937e635 inherit pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d4823e98e86d802e2212cf45b1c7456 inherit pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a3d4823e98e86d802e2212cf45b1c7456">get_class_name</a> ()</td></tr>
<tr class="separator:a3d4823e98e86d802e2212cf45b1c7456 inherit pro_methods_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component')"><img src="closed.png" alt="-"/>&#160;Статические открытые данные inherited from <a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html">Component</a></td></tr>
<tr class="memitem:a1fa3127fc82f96b1436d871ef02be319 inherit pub_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a1fa3127fc82f96b1436d871ef02be319">$db</a> = null</td></tr>
<tr class="separator:a1fa3127fc82f96b1436d871ef02be319 inherit pub_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfb117f244076aa9bc269269f7e57403 inherit pub_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#adfb117f244076aa9bc269269f7e57403">$app</a> = null</td></tr>
<tr class="separator:adfb117f244076aa9bc269269f7e57403 inherit pub_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component"><td colspan="2" onclick="javascript:toggleInherit('pro_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component')"><img src="closed.png" alt="-"/>&#160;Статические защищенные данные inherited from <a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html">Component</a></td></tr>
<tr class="memitem:a849a4c339c31b1d91a6f23c5f56b69f3 inherit pro_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a849a4c339c31b1d91a6f23c5f56b69f3">$_models</a> = []</td></tr>
<tr class="separator:a849a4c339c31b1d91a6f23c5f56b69f3 inherit pro_static_attribs_class_d_m_f_1_1_core_1_1_component_1_1_component"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Базовая модель </p>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00013">13</a></p>
</div><h2 class="groupheader">Методы</h2>
<a class="anchor" id="a44dfeeca21a0b8d28e12ee2101cd2901"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_create_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Создание новой таблицы </p>
<dl class="section return"><dt>Возвращает</dt><dd>bool TODO: Добавить реализацию загрузки фикстур </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00082">82</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="comment">// Выполнение запроса на создание таблицы в БД</span></div>
<div class="line">            self::$db-&gt;exec($this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a2f016cbc7f01f9a328c6ee504b55dec9">_generate_sql_for_table</a>());</div>
<div class="line">            <span class="comment">// Загрузка фикстур</span></div>
<div class="line">            $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a5549ced891f16d60fb04ae7cb09b5525">_load_fixtures</a>();</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1a626c1f0706d551280128b1ac1c573a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_drop_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Удаление таблицы </p>
<dl class="section return"><dt>Возвращает</dt><dd>bool </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00156">156</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            self::$db-&gt;exec(<span class="stringliteral">&#39;DROP TABLE IF EXISTS &#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>());</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a80ad7c210b6e2edce53bd0398f102524"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_dump_data </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limit</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Дамп данных из БД за вычетом первичного ключа </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">null&#160;|&#160;int</td><td class="paramname">$limit</td><td>Предел выборки данных из БД </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>mixed </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00137">137</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $fixture = [];</div>
<div class="line">            <span class="comment">// Запрос на выборку элементов из БД</span></div>
<div class="line">            $query = <span class="stringliteral">&#39;SELECT * FROM &#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>() . (is_null($limit) ? <span class="stringliteral">&#39;&#39;</span> : <span class="stringliteral">&#39; LIMIT &#39;</span> . (int)$limit);</div>
<div class="line">            $data = self::$db-&gt;query($query)-&gt;fetch_all();</div>
<div class="line">            <span class="comment">// Имя первичного ключа, для его удаления</span></div>
<div class="line">            $primary_key = $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a8910e5554267df39245417efc26bbc60">_get_primary_key_field_name</a>();</div>
<div class="line">            <span class="keywordflow">foreach</span> ($data as $element) {</div>
<div class="line">                unset($element[$primary_key]);</div>
<div class="line">                $fixture[] = $element;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> $fixture;</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d49220192e0e6935e54dc6da94ab6af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_dump_fixtures </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Получение данных из БД и выгрузка их в файл фикстур </p>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00125">125</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $fixture_name = strtolower($this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a27aa433d2444e978e5d193728937e635">get_module_name</a>()) . <span class="stringliteral">&#39;__&#39;</span> . strtolower($this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a3d4823e98e86d802e2212cf45b1c7456">get_class_name</a>()) . <span class="stringliteral">&#39;.json&#39;</span>;</div>
<div class="line">            $data = $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a80ad7c210b6e2edce53bd0398f102524">_dump_data</a>(10);</div>
<div class="line">            <a class="code" href="class_d_m_f_1_1_core_1_1_o_s_1_1_o_s.html#a82b41f96e4e27864a6cf0c380f550fe1">OS::file</a>(DATA_PATH . <span class="stringliteral">&#39;fixtures&#39;</span> . _SEP . $fixture_name)-&gt;write(json_encode($data, JSON_PRETTY_PRINT));</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f016cbc7f01f9a328c6ee504b55dec9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_generate_sql_for_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Возвращает SQL код, необходимый для создания текущей схемы таблицы </p>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00164">164</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $query = <span class="stringliteral">&#39;CREATE TABLE IF NOT EXISTS `&#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>() . <span class="stringliteral">&#39;` (&#39;</span> . PHP_EOL;</div>
<div class="line">            $fields = $this-&gt;_generate_sql_for_model_fields();</div>
<div class="line">            $query .= implode(<span class="charliteral">&#39;,&#39;</span> . PHP_EOL, $fields) . PHP_EOL . <span class="stringliteral">&#39;) ENGINE=InnoDB DEFAULT CHARSET=utf8&#39;</span>;</div>
<div class="line">            <span class="keywordflow">return</span> $query;</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8910e5554267df39245417efc26bbc60"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_get_primary_key_field_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Возвращает имя первичного ключа таблицы </p>
<dl class="section return"><dt>Возвращает</dt><dd>bool|int|string </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00176">176</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">foreach</span> ($this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a5022fc366773937f776f7f58d9d7b8eb">_scheme</a>() as $field_name =&gt; $field_object) {</div>
<div class="line">                <span class="keywordflow">if</span> ($field_object instanceof \DMF\Core\Model\Field\PrimaryKeyField) {</div>
<div class="line">                    <span class="keywordflow">return</span> $field_name;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> <span class="stringliteral">&#39;id&#39;</span>;</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaa002973b91e5b6ceb97a78e4bc2bc80"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_get_sql_from_condition </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$condition</em> = <code>[]</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Генерация параметризированного SQL кода </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$condition</td><td>Список параметров для выборки </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array </dd></dl>
<p>Обработка логического условия</p>
<p>Создание массива значений для выборки</p>
<p>Проверка на точное совпадение</p>
<p>Проверка на точное различие</p>
<p>Проверка на больше</p>
<p>Проверка на больше или равно</p>
<p>Проверка на меньше</p>
<p>Проверка на меньше или равно</p>
<p>Проверка на то, что значение начинается с нужной подстроки</p>
<p>Проверка на то, что значение заканчивается нужной подстрокой</p>
<p>Проверка на то, что значение содержит нужную подстроку</p>
<p>Проверка на то, что значение есть в списке</p>
<p>Проверка на то, что значение равно или не равно нулю </p>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00191">191</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (count($condition) &lt;= 0) {</div>
<div class="line">                <span class="keywordflow">return</span> [<span class="stringliteral">&#39;query&#39;</span> =&gt; <span class="stringliteral">&#39;&#39;</span>, <span class="stringliteral">&#39;params&#39;</span> =&gt; []];</div>
<div class="line">            }</div>
<div class="line">            $result = [</div>
<div class="line">                <span class="stringliteral">&#39;queries&#39;</span> =&gt; [],</div>
<div class="line">                <span class="stringliteral">&#39;params&#39;</span>  =&gt; []</div>
<div class="line">            ];</div>
<div class="line">            $i = 0;</div>
<div class="line">            <span class="keywordflow">foreach</span> ($condition as $field_cond =&gt; $value) {</div>
<div class="line">                $data = explode(<span class="stringliteral">&#39;__&#39;</span>, $field_cond);</div>
<div class="line">                $field_name = $data[0];</div>
<div class="line">                <span class="keywordflow">if</span> ($i == 0) {</div>
<div class="line">                    $precond = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">                }</div>
<div class="line">                elseif (substr($data[0], 0, 1) == <span class="charliteral">&#39;~&#39;</span>) {</div>
<div class="line">                    $precond = <span class="stringliteral">&#39; OR &#39;</span>;</div>
<div class="line">                    $field_name = substr($data[0], 1);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    $precond = <span class="stringliteral">&#39; AND &#39;</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (count($data) == 1) {</div>
<div class="line">                    $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39;=:&#39;</span> . $field_name;</div>
<div class="line">                    $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    $cond = $data[1];</div>
<div class="line">                    <span class="keywordflow">switch</span> ($cond) {</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;equal&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39;=:&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;not_equal&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39;!=:&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gt&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39;&gt;:&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;gte&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39;&gt;=:&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;lt&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39;&lt;:&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;lte&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39;&lt;=:&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;startswith&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39; LIKE :&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value . <span class="charliteral">&#39;%&#39;</span>;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;endswith&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39; LIKE :&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = <span class="charliteral">&#39;%&#39;</span> . $value;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;contains&#39;</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39; LIKE :&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = <span class="charliteral">&#39;%&#39;</span> . $value . <span class="charliteral">&#39;%&#39;</span>;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;in&#39;</span>:</div>
<div class="line">                            <span class="keywordflow">if</span> (is_array($value)) {</div>
<div class="line">                                $value = implode(<span class="stringliteral">&#39;, &#39;</span>, $value);</div>
<div class="line">                            }</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39; IN(:&#39;</span> . $field_name . <span class="charliteral">&#39;)&#39;</span>;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = implode(<span class="stringliteral">&#39;, &#39;</span>, $value);</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">case</span> <span class="stringliteral">&#39;is_null&#39;</span>:</div>
<div class="line">                            <span class="keywordflow">if</span> ($value === <span class="keyword">true</span>) {</div>
<div class="line">                                $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39; IS NULL &#39;</span>;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">else</span> {</div>
<div class="line">                                $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39; IS NOT NULL &#39;</span>;</div>
<div class="line">                            }</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        <span class="keywordflow">default</span>:</div>
<div class="line">                            $result[<span class="stringliteral">&#39;queries&#39;</span>][] = $precond . $field_name . <span class="stringliteral">&#39;=:&#39;</span> . $field_name;</div>
<div class="line">                            $result[<span class="stringliteral">&#39;params&#39;</span>][$field_name] = $value;</div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                $i++;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> [</div>
<div class="line">                <span class="stringliteral">&#39;query&#39;</span>  =&gt; <span class="stringliteral">&#39; WHERE &#39;</span> . implode(<span class="stringliteral">&#39;&#39;</span>, $result[<span class="stringliteral">&#39;queries&#39;</span>]),</div>
<div class="line">                <span class="stringliteral">&#39;params&#39;</span> =&gt; $result[<span class="stringliteral">&#39;params&#39;</span>]</div>
<div class="line">            ];</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b83532e52d75afcaf0ac217672c2611"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_get_sql_from_limit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Генерация SQL кода для реализации лимита выборки </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;int</td><td class="paramname">$limit</td><td>Лимит выборки </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00340">340</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (is_null($limit)) {</div>
<div class="line">                <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> <span class="stringliteral">&#39; LIMIT &#39;</span> . $limit;</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4786eee57e28e78f2e40cf4573c329c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_get_sql_from_order_by </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$order_by</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Генерация SQL кода для сортировки вывода </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">string&#160;|&#160;array</td><td class="paramname">$order_by</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>string </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00304">304</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (count($order_by) &lt;= 0) {</div>
<div class="line">                <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (is_string($order_by)) {</div>
<div class="line">                <span class="keywordflow">if</span> (substr($order_by, 0, 1) == <span class="charliteral">&#39;~&#39;</span>) {</div>
<div class="line">                    $order_direction = <span class="stringliteral">&#39;DESC&#39;</span>;</div>
<div class="line">                    $order_by = substr($order_by, 1);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    $order_direction = <span class="stringliteral">&#39;ASC&#39;</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">return</span> <span class="stringliteral">&#39; ORDER BY &#39;</span> . $order_by . <span class="charliteral">&#39; &#39;</span> . $order_direction;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> {</div>
<div class="line">                $data = [];</div>
<div class="line">                <span class="keywordflow">foreach</span> ($order_by as $field) {</div>
<div class="line">                    <span class="keywordflow">if</span> (substr($field, 0, 1) == <span class="charliteral">&#39;~&#39;</span>) {</div>
<div class="line">                        $order_direction = <span class="stringliteral">&#39;DESC&#39;</span>;</div>
<div class="line">                        $field = substr($field, 1);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span> {</div>
<div class="line">                        $order_direction = <span class="stringliteral">&#39;ASC&#39;</span>;</div>
<div class="line">                    }</div>
<div class="line">                    $data[] = $field . <span class="charliteral">&#39; &#39;</span> . $order_direction;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">return</span> <span class="stringliteral">&#39; ORDER BY &#39;</span> . implode(<span class="stringliteral">&#39;, &#39;</span>, $data);</div>
<div class="line">            }</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab6cb221e1b1dc53917ff3ac2eb56f4d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_get_table_fields </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Возвращает массив, содержащий имена полей БД </p>
<dl class="section return"><dt>Возвращает</dt><dd>array </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00352">352</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> array_keys($this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a5022fc366773937f776f7f58d9d7b8eb">_scheme</a>());</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3568bcae68c990259045cb424aaaa858"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_get_table_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Возвращает строку с именем таблицы БД </p>
<dl class="section return"><dt>Возвращает</dt><dd>string </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00042">42</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (is_null($this-&gt;table_name)) {</div>
<div class="line">                <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a7fa118d3a69facb2d428c15c3d7e5533">_get_table_prefix</a>() . strtolower($this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a3d4823e98e86d802e2212cf45b1c7456">get_class_name</a>()) . <span class="charliteral">&#39;s&#39;</span>;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a7fa118d3a69facb2d428c15c3d7e5533">_get_table_prefix</a>() . <a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a63f4748915d2fdad2f2503705a7dbb59">$this-&gt;table_name</a>;</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7fa118d3a69facb2d428c15c3d7e5533"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">_get_table_prefix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Возвращает строку с префиксом к имени таблицы Возможно переопределить в дочернем классе для использования собственных префиксов </p>
<dl class="section return"><dt>Возвращает</dt><dd>mixed </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00033">33</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#ab8e85eba626e0e5aa5667b2fe29d61fc">config</a>(<span class="stringliteral">&#39;database&#39;</span>)[<span class="stringliteral">&#39;prefix&#39;</span>];</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5549ced891f16d60fb04ae7cb09b5525"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_load_fixtures </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Поиск и загрузка данных из фикстур </p>
<dl class="exception"><dt>Исключения</dt><dd>
  <table class="exception">
    <tr><td class="paramname">Exception\DBError</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00094">94</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="comment">// Имя файл фикстуры, генерируется из имени модуля и имени модели</span></div>
<div class="line">            $fixture_name = strtolower($this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a27aa433d2444e978e5d193728937e635">get_module_name</a>()) . <span class="stringliteral">&#39;__&#39;</span> . strtolower($this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_component_1_1_component.html#a3d4823e98e86d802e2212cf45b1c7456">get_class_name</a>()) . <span class="stringliteral">&#39;.json&#39;</span>;</div>
<div class="line">            <span class="comment">// Полный путь до файла с фикстурой</span></div>
<div class="line">            $fixture = <a class="code" href="class_d_m_f_1_1_core_1_1_o_s_1_1_o_s.html#a82b41f96e4e27864a6cf0c380f550fe1">OS::file</a>(DATA_PATH . <span class="stringliteral">&#39;fixtures&#39;</span> . _SEP . $fixture_name)-&gt;as_string();</div>
<div class="line">            <span class="comment">// Если файл с фикстурой отсутствует, то ничего не делаем</span></div>
<div class="line">            <span class="keywordflow">if</span> ($fixture !== <span class="keyword">false</span>) {</div>
<div class="line">                <span class="comment">// Данные из файла, преобразованные в PHP массив</span></div>
<div class="line">                $data = json_decode($fixture);</div>
<div class="line">                <span class="comment">// Выполнение сохранения объектов из БД в транзакции с откатом при ошибке</span></div>
<div class="line">                <span class="keywordflow">try</span> {</div>
<div class="line">                    self::$db-&gt;beginTransaction();</div>
<div class="line">                    <span class="comment">// Обходим массив и добавляем каждый элемент в БД</span></div>
<div class="line">                    <span class="keywordflow">foreach</span> ($data as $element) {</div>
<div class="line">                        $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a67c8b15d2856f2c4097a9db32f90b706">create</a>($element);</div>
<div class="line">                    }</div>
<div class="line">                    self::$db-&gt;commit();</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">catch</span> (\Exception $e) {</div>
<div class="line">                    <span class="comment">// Откатываемся, если обнаружили ошибку</span></div>
<div class="line">                    self::$db-&gt;rollBack();</div>
<div class="line">                    <span class="keywordflow">throw</span> <span class="keyword">new</span> DBError(<span class="stringliteral">&#39;[DB] Произошла ошибка при выполнении запроса к БД, транзакция будет отменена.</span></div>
<div class="line"><span class="stringliteral">                        Текст ошибки: &#39;</span> . $e-&gt;getMessage());</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5022fc366773937f776f7f58d9d7b8eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_scheme </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Возвращает текущую схему БД </p>
<dl class="section return"><dt>Возвращает</dt><dd>array </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00023">23</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            <span class="keywordflow">return</span> [];</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0477cca06448ebd1b27f2800f348d5b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_update_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Обновление структуры таблицы в БД </p>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00068">68</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $check_table = self::$db-&gt;query(<span class="stringliteral">&#39;SHOW TABLES LIKE :table&#39;</span>, [<span class="stringliteral">&#39;table&#39;</span> =&gt; $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>()]);</div>
<div class="line">            <span class="keywordflow">if</span> ($check_table-&gt;num_rows() == 1) {</div>
<div class="line">                $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a1a626c1f0706d551280128b1ac1c573a">_drop_table</a>();</div>
<div class="line">            }</div>
<div class="line">            $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a44dfeeca21a0b8d28e12ee2101cd2901">_create_table</a>();</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a67c8b15d2856f2c4097a9db32f90b706"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">create </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Создание нового объекта в БД </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td>Данные для создания объекта </td></tr>
  </table>
  </dd>
</dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00472">472</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $fields = $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#ab6cb221e1b1dc53917ff3ac2eb56f4d6">_get_table_fields</a>();</div>
<div class="line">            $sql = [];</div>
<div class="line">            $params = [];</div>
<div class="line">            <span class="keywordflow">foreach</span> ($data as $key =&gt; $value) {</div>
<div class="line">                <span class="keywordflow">if</span> (in_array($key, $fields)) {</div>
<div class="line">                    $sql[] = $key . <span class="stringliteral">&#39;=:u_&#39;</span> . $key;</div>
<div class="line">                    $params[<span class="stringliteral">&#39;u_&#39;</span> . $key] = $value;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            $result_code = <span class="stringliteral">&#39;INSERT INTO &#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>() . <span class="stringliteral">&#39; SET &#39;</span> . implode(<span class="stringliteral">&#39;, &#39;</span>, $sql);</div>
<div class="line">            self::$db-&gt;query($result_code, $params);</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a68fec40012b18bc6aedb203350fd6a1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_by_condition </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$condition</em> = <code>[]</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$order_by</em> = <code>[]</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$limit</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fields</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Выборка массива объектов для определенной страницы </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$order_by</td><td>Поле для сортировки </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$condition</td><td>Условия для выборки </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$limit</td><td>Количество объектов </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$fields</td><td>Список выбираемых полей </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array|string </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00409">409</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $select_fields = (count($fields) &gt; 0) ? $fields : $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#ab6cb221e1b1dc53917ff3ac2eb56f4d6">_get_table_fields</a>();</div>
<div class="line">            $sql_condition = $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#aaa002973b91e5b6ceb97a78e4bc2bc80">_get_sql_from_condition</a>($condition);</div>
<div class="line">            $sql = <span class="stringliteral">&#39;SELECT &#39;</span> . implode(<span class="stringliteral">&#39;, &#39;</span>, $select_fields) . <span class="stringliteral">&#39; FROM &#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>()</div>
<div class="line">                    . $sql_condition[<span class="stringliteral">&#39;query&#39;</span>]</div>
<div class="line">                    . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#aa4786eee57e28e78f2e40cf4573c329c">_get_sql_from_order_by</a>($order_by)</div>
<div class="line">                    . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3b83532e52d75afcaf0ac217672c2611">_get_sql_from_limit</a>($limit);</div>
<div class="line">            $data = self::$db-&gt;query($sql, $sql_condition[<span class="stringliteral">&#39;params&#39;</span>]);</div>
<div class="line">            <span class="keywordflow">if</span> ($data-&gt;num_rows() &gt; 0) {</div>
<div class="line">                <span class="keywordflow">return</span> $data-&gt;fetch_all();</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> [];</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a842616d757b4e68424cc3ad96f0a7c83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">get_by_pk </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$fields</em> = <code>[]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Возвращает один объект, выбранный по первичному ключу </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">int</td><td class="paramname">$pk</td><td>Первичный ключ </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$fields</td><td>Список выбираемых из таблицы полей </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>array </dd></dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00387">387</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $select_fields = (count($fields) &gt; 0) ? $fields : $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#ab6cb221e1b1dc53917ff3ac2eb56f4d6">_get_table_fields</a>();</div>
<div class="line">            $data = self::$db-&gt;query(</div>
<div class="line">                <span class="stringliteral">&#39;SELECT &#39;</span> . implode(<span class="stringliteral">&#39;, &#39;</span>, $select_fields) . <span class="stringliteral">&#39; FROM &#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>() . <span class="stringliteral">&#39; WHERE &#39;</span></div>
<div class="line">                        . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a8910e5554267df39245417efc26bbc60">_get_primary_key_field_name</a>() . <span class="stringliteral">&#39;=:pk LIMIT 1&#39;</span>,</div>
<div class="line">                [<span class="stringliteral">&#39;pk&#39;</span> =&gt; (<span class="keywordtype">int</span>)$pk]</div>
<div class="line">            );</div>
<div class="line">            <span class="keywordflow">if</span> ($data-&gt;num_rows() == 1) {</div>
<div class="line">                <span class="keywordflow">return</span> $data-&gt;fetch_one();</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> [];</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a219c164f3c03521fa184c876b3223b34"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">update_by_condition </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$condition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Обновление объектов по определенному условию </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td>Данные для обновления </td></tr>
    <tr><td class="paramtype">array</td><td class="paramname">$condition</td><td>Условия для выборки </td></tr>
  </table>
  </dd>
</dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00451">451</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $cond = $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#aaa002973b91e5b6ceb97a78e4bc2bc80">_get_sql_from_condition</a>($condition);</div>
<div class="line">            $fields = $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#ab6cb221e1b1dc53917ff3ac2eb56f4d6">_get_table_fields</a>();</div>
<div class="line">            $sql = [];</div>
<div class="line">            $params = [];</div>
<div class="line">            <span class="keywordflow">foreach</span> ($data as $key =&gt; $value) {</div>
<div class="line">                <span class="keywordflow">if</span> (in_array($key, $fields)) {</div>
<div class="line">                    $sql[] = $key . <span class="stringliteral">&#39;=:u_&#39;</span> . $key;</div>
<div class="line">                    $params[<span class="stringliteral">&#39;u_&#39;</span> . $key] = $value;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            $result_params = array_merge($params, $cond[<span class="stringliteral">&#39;params&#39;</span>]);</div>
<div class="line">            $result_code = <span class="stringliteral">&#39;UPDATE &#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>() . <span class="stringliteral">&#39; SET &#39;</span> . implode(<span class="stringliteral">&#39;, &#39;</span>, $sql) . $cond[<span class="stringliteral">&#39;query&#39;</span>];</div>
<div class="line">            self::$db-&gt;query($result_code, $result_params);</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a73df0100ad236c68cceeb77f0050ad8c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">update_by_pk </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$pk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Обновление объекта по его первичному ключу </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$data</td><td>Данные для обновления </td></tr>
    <tr><td class="paramtype">int</td><td class="paramname">$pk</td><td>Первичный ключ </td></tr>
  </table>
  </dd>
</dl>

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00429">429</a></p>
<div class="fragment"><div class="line">        {</div>
<div class="line">            $fields = $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#ab6cb221e1b1dc53917ff3ac2eb56f4d6">_get_table_fields</a>();</div>
<div class="line">            $sql = [];</div>
<div class="line">            $params = [];</div>
<div class="line">            <span class="keywordflow">foreach</span> ($data as $key =&gt; $value) {</div>
<div class="line">                <span class="keywordflow">if</span> (in_array($key, $fields)) {</div>
<div class="line">                    $sql[] = $key . <span class="stringliteral">&#39;=:u_&#39;</span> . $key;</div>
<div class="line">                    $params[<span class="stringliteral">&#39;u_&#39;</span> . $key] = $value;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">            $params[<span class="stringliteral">&#39;pk&#39;</span>] = $pk;</div>
<div class="line">            $result_code = <span class="stringliteral">&#39;UPDATE &#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a3568bcae68c990259045cb424aaaa858">_get_table_name</a>() . <span class="stringliteral">&#39; SET &#39;</span> . implode(<span class="stringliteral">&#39;, &#39;</span>, $sql)</div>
<div class="line">                    . <span class="stringliteral">&#39; WHERE &#39;</span> . $this-&gt;<a class="code" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html#a8910e5554267df39245417efc26bbc60">_get_primary_key_field_name</a>() . <span class="stringliteral">&#39;=:pk&#39;</span>;</div>
<div class="line">            self::$db-&gt;query($result_code, $params);</div>
<div class="line">        }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Поля</h2>
<a class="anchor" id="a63f4748915d2fdad2f2503705a7dbb59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">$table_name = null</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>См. определение в файле <a class="el" href="_model_8php_source.html">Model.php</a> строка <a class="el" href="_model_8php_source.html#l00017">17</a></p>

</div>
</div>
<hr/>Объявления и описания членов класса находятся в файле:<ul>
<li>C:/Users/damirazo/htdocs/framework/packages/DMF/Core/Model/<a class="el" href="_model_8php_source.html">Model.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_d_m_f.html">DMF</a></li><li class="navelem"><a class="el" href="namespace_d_m_f_1_1_core.html">Core</a></li><li class="navelem"><a class="el" href="namespace_d_m_f_1_1_core_1_1_model.html">Model</a></li><li class="navelem"><a class="el" href="class_d_m_f_1_1_core_1_1_model_1_1_model.html">Model</a></li>
    <li class="footer">Документация по DM Framework. Последние изменения: Сб 29 Дек 2012 14:48:52. Создано системой
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3 </li>
  </ul>
</div>
</body>
</html>
